{"ast":null,"code":"var _jsxFileName = \"/Users/sofiaspagnoletti/Desktop/second_time_around/client/src/components/UploadImg/index.js\";\nimport React, { Component } from 'react'; // import { API_URL } from './config'\n\nimport PostForm from \"../PostForm\";\nimport API from '../../utils/API';\n\nclass UploadImg extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      uploading: false,\n      imageUrl: \"\"\n    };\n\n    this.onChange = e => {\n      const files = Array.from(e.target.files);\n      this.setState({\n        uploading: true\n      });\n      const formData = new FormData();\n      files.forEach((file, i) => {\n        formData.append(i, file);\n      }); //sends the img to server\n\n      fetch(\"http://localhost:3001/image-upload\", {\n        method: 'POST',\n        body: formData\n      }).then(res => res.json()).then(images => {\n        this.setState({\n          uploading: false,\n          imageUrl: images[0].url\n        });\n      });\n    };\n\n    this.onSubmit = e => {\n      console.log(\"Submitting\");\n      API.saveItem({\n        name: \"SomeItemName\",\n        description: \"SomeDescription\",\n        location: \"Random location\",\n        imageUrl: this.state.imageUrl\n      });\n    };\n\n    this.handleFormSubmit = event => {\n      event.preventDefault();\n\n      if (this.state.item && this.state.quantity) {\n        API.savePost({\n          itemName: this.state.item,\n          quantity: this.state.quantity,\n          category: this.state.category,\n          imageUrl: this.state.imageUrl\n        }).then(res => console.log(res)).catch(err => console.log(err));\n      }\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(PostForm, {\n      onChange: this.onChange,\n      image: this.state.imageUrl,\n      handleFormSubmit: this.handleFormSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    })) //adding this.state.imageUrl\n    ;\n  }\n\n}\n\nexport default UploadImg;","map":{"version":3,"sources":["/Users/sofiaspagnoletti/Desktop/second_time_around/client/src/components/UploadImg/index.js"],"names":["React","Component","PostForm","API","UploadImg","state","uploading","imageUrl","onChange","e","files","Array","from","target","setState","formData","FormData","forEach","file","i","append","fetch","method","body","then","res","json","images","url","onSubmit","console","log","saveItem","name","description","location","handleFormSubmit","event","preventDefault","item","quantity","savePost","itemName","category","catch","err","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC,C,CACA;;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,OAAOC,GAAP,MAAgB,iBAAhB;;AAEA,MAAMC,SAAN,SAAwBH,SAAxB,CAAkC;AAAA;AAAA;AAAA,SAEhCI,KAFgC,GAExB;AACNC,MAAAA,SAAS,EAAE,KADL;AAENC,MAAAA,QAAQ,EAAE;AAFJ,KAFwB;;AAAA,SAOhCC,QAPgC,GAOrBC,CAAC,IAAI;AACd,YAAMC,KAAK,GAAGC,KAAK,CAACC,IAAN,CAAWH,CAAC,CAACI,MAAF,CAASH,KAApB,CAAd;AACA,WAAKI,QAAL,CAAc;AAAER,QAAAA,SAAS,EAAE;AAAb,OAAd;AAEA,YAAMS,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AAEAN,MAAAA,KAAK,CAACO,OAAN,CAAc,CAACC,IAAD,EAAOC,CAAP,KAAa;AACzBJ,QAAAA,QAAQ,CAACK,MAAT,CAAgBD,CAAhB,EAAmBD,IAAnB;AACD,OAFD,EANc,CAUd;;AACAG,MAAAA,KAAK,uCAAuC;AAC1CC,QAAAA,MAAM,EAAE,MADkC;AAE1CC,QAAAA,IAAI,EAAER;AAFoC,OAAvC,CAAL,CAICS,IAJD,CAIMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAJb,EAKCF,IALD,CAKMG,MAAM,IAAI;AACd,aAAKb,QAAL,CAAc;AACZR,UAAAA,SAAS,EAAE,KADC;AAEZC,UAAAA,QAAQ,EAAEoB,MAAM,CAAC,CAAD,CAAN,CAAUC;AAFR,SAAd;AAID,OAVD;AAWD,KA7B+B;;AAAA,SAgChCC,QAhCgC,GAgCpBpB,CAAD,IAAO;AAChBqB,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA5B,MAAAA,GAAG,CAAC6B,QAAJ,CAAa;AACHC,QAAAA,IAAI,EAAE,cADH;AAETC,QAAAA,WAAW,EAAE,iBAFJ;AAGTC,QAAAA,QAAQ,EAAE,iBAHD;AAIT5B,QAAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWE;AAJZ,OAAb;AAMD,KAxC+B;;AAAA,SA0ChC6B,gBA1CgC,GA0CbC,KAAK,IAAI;AAC1BA,MAAAA,KAAK,CAACC,cAAN;;AACA,UAAI,KAAKjC,KAAL,CAAWkC,IAAX,IAAmB,KAAKlC,KAAL,CAAWmC,QAAlC,EAA4C;AAC1CrC,QAAAA,GAAG,CAACsC,QAAJ,CAAa;AACXC,UAAAA,QAAQ,EAAE,KAAKrC,KAAL,CAAWkC,IADV;AAEXC,UAAAA,QAAQ,EAAE,KAAKnC,KAAL,CAAWmC,QAFV;AAGXG,UAAAA,QAAQ,EAAE,KAAKtC,KAAL,CAAWsC,QAHV;AAIXpC,UAAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWE;AAJV,SAAb,EAKGiB,IALH,CAKQC,GAAG,IAAIK,OAAO,CAACC,GAAR,CAAYN,GAAZ,CALf,EAMGmB,KANH,CAMSC,GAAG,IAAIf,OAAO,CAACC,GAAR,CAAYc,GAAZ,CANhB;AAOD;AACF,KArD+B;AAAA;;AAuDhCC,EAAAA,MAAM,GAAG;AACP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,QAAD;AAAU,MAAA,QAAQ,EAAE,KAAKtC,QAAzB;AAAmC,MAAA,KAAK,EAAE,KAAKH,KAAL,CAAWE,QAArD;AAA+D,MAAA,gBAAgB,EAAE,KAAK6B,gBAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADF,CAIE;AAJF;AAMD;;AA9D+B;;AAiElC,eAAehC,SAAf","sourcesContent":["import React, { Component } from 'react'\n// import { API_URL } from './config'\nimport PostForm from \"../PostForm\"\nimport API from '../../utils/API';\n\nclass UploadImg extends Component {\n  \n  state = {\n    uploading: false,\n    imageUrl: \"\"\n  }\n\n  onChange = e => {\n    const files = Array.from(e.target.files)\n    this.setState({ uploading: true })\n\n    const formData = new FormData()\n\n    files.forEach((file, i) => {\n      formData.append(i, file)\n    })\n\n    //sends the img to server\n    fetch(`http://localhost:3001/image-upload`, {\n      method: 'POST',\n      body: formData\n    })\n    .then(res => res.json())\n    .then(images => {\n      this.setState({ \n        uploading: false,\n        imageUrl: images[0].url\n      });\n    });\n  }\n\n  // submitting this.state.imageURL to the API\n  onSubmit = (e) => {\n    console.log(\"Submitting\");\n    API.saveItem({\n              name: \"SomeItemName\",\n        description: \"SomeDescription\",\n        location: \"Random location\",\n        imageUrl: this.state.imageUrl\n    });\n  }\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    if (this.state.item && this.state.quantity) {\n      API.savePost({\n        itemName: this.state.item,\n        quantity: this.state.quantity,\n        category: this.state.category,\n        imageUrl: this.state.imageUrl\n      }).then(res => console.log(res))\n        .catch(err => console.log(err));\n    }\n  };\n\n  render() {\n    return (\n      <div>\n          <PostForm onChange={this.onChange} image={this.state.imageUrl} handleFormSubmit={this.handleFormSubmit}></PostForm>\n      </div>\n      //adding this.state.imageUrl\n    )\n  }\n}\n\nexport default UploadImg;"]},"metadata":{},"sourceType":"module"}