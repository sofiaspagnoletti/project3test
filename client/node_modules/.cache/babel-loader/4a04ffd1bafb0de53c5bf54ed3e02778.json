{"ast":null,"code":"var _jsxFileName = \"/Users/sofiaspagnoletti/Desktop/second_time_around/client/src/components/ItemsDonated/ItemsDonated.js\";\nimport React, { Component } from \"react\";\nimport API from \"../../utils/API\";\nimport ItemCard from \"../ItemCard\";\n\nclass ItemsDonated extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      item: \"\",\n      quantity: \"\",\n      category: \"\",\n      stock_id: \"\",\n      img_url: \"\",\n      stocks: [] //load all stock\n\n    };\n\n    this.loadStock = () => {\n      var arr = [];\n      API.getData().then(res => {\n        //this.setState({ stocks: res.data })\n        res.data.forEach(element => {\n          if (element.claimed == \"false\") {\n            arr.push(element);\n          } else if (element.claimed == \"true\") {\n            //console.log(\"pickupppp\"+element.claimedDate);\n            //checking date claimed is less that current date (no pickup happened)\n            var dtcl = new Date(element.claimedDate);\n            dtcl.setDate(dtcl.getDate() + 2);\n            var todays_date = new Date();\n\n            if (dtcl < todays_date) {\n              arr.push(element);\n              console.log(\"no pickup on date +2 so back to stock till 5days starting from posted date\");\n            } else {\n              console.log(\"item pickup success or going to happen\");\n            }\n          } //if claimed item not collected\n\n\n          var dt = new Date(element.date);\n          dt.setDate(dt.getDate() + 1); // console.log(dt);\n          //need to complete\n        });\n        this.setState({\n          stocks: arr\n        }); // this.props.updatestock(this.state.stocks);\n\n        console.log(res.data);\n      }).catch(err => console.log(err));\n    };\n  }\n\n  componentDidMount() {\n    this.loadStock();\n  }\n\n  render() {\n    console.log(this.state.stocks.length);\n    return React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, this.state.stocks.length > 1 && this.state.stocks.map(stock => React.createElement(ItemCard, {\n      item: stock,\n      key: stock.stock_id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default ItemsDonated;","map":{"version":3,"sources":["/Users/sofiaspagnoletti/Desktop/second_time_around/client/src/components/ItemsDonated/ItemsDonated.js"],"names":["React","Component","API","ItemCard","ItemsDonated","state","item","quantity","category","stock_id","img_url","stocks","loadStock","arr","getData","then","res","data","forEach","element","claimed","push","dtcl","Date","claimedDate","setDate","getDate","todays_date","console","log","dt","date","setState","catch","err","componentDidMount","render","length","map","stock"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,GAAP,MAAgB,iBAAhB;AACA,OAAOC,QAAP,MAAqB,aAArB;;AAGA,MAAMC,YAAN,SAA2BH,SAA3B,CAAqC;AAAA;AAAA;AAAA,SAEnCI,KAFmC,GAE3B;AACNC,MAAAA,IAAI,EAAE,EADA;AAENC,MAAAA,QAAQ,EAAE,EAFJ;AAGNC,MAAAA,QAAQ,EAAE,EAHJ;AAINC,MAAAA,QAAQ,EAAE,EAJJ;AAKNC,MAAAA,OAAO,EAAE,EALH;AAMNC,MAAAA,MAAM,EAAE,EANF,CAUR;;AAVQ,KAF2B;;AAAA,SAiBnCC,SAjBmC,GAiBvB,MAAM;AAChB,UAAIC,GAAG,GAAC,EAAR;AACAX,MAAAA,GAAG,CAACY,OAAJ,GACGC,IADH,CACQC,GAAG,IAAI;AAEX;AAEAA,QAAAA,GAAG,CAACC,IAAJ,CAASC,OAAT,CAAiBC,OAAO,IAAI;AAE1B,cAAGA,OAAO,CAACC,OAAR,IAAkB,OAArB,EACA;AACEP,YAAAA,GAAG,CAACQ,IAAJ,CAASF,OAAT;AAGD,WALD,MAMG,IAAGA,OAAO,CAACC,OAAR,IAAiB,MAApB,EACL;AACE;AACA;AACA,gBAAIE,IAAI,GAAC,IAAIC,IAAJ,CAASJ,OAAO,CAACK,WAAjB,CAAT;AACAF,YAAAA,IAAI,CAACG,OAAL,CAAaH,IAAI,CAACI,OAAL,KAAe,CAA5B;AACA,gBAAIC,WAAW,GAAC,IAAIJ,IAAJ,EAAhB;;AACA,gBAAGD,IAAI,GAACK,WAAR,EACA;AACEd,cAAAA,GAAG,CAACQ,IAAJ,CAASF,OAAT;AACAS,cAAAA,OAAO,CAACC,GAAR,CAAY,4EAAZ;AACD,aAJD,MAKI;AACHD,cAAAA,OAAO,CAACC,GAAR,CAAY,wCAAZ;AACA;AAEF,WAxB2B,CA0BxB;;;AACA,cAAIC,EAAE,GAAC,IAAIP,IAAJ,CAASJ,OAAO,CAACY,IAAjB,CAAP;AACAD,UAAAA,EAAE,CAACL,OAAH,CAAWK,EAAE,CAACJ,OAAH,KAAa,CAAxB,EA5BwB,CA6BzB;AACC;AAIH,SAlCD;AAmCA,aAAKM,QAAL,CAAc;AAAErB,UAAAA,MAAM,EAAEE;AAAV,SAAd,EAvCW,CAwCX;;AACAe,QAAAA,OAAO,CAACC,GAAR,CAAYb,GAAG,CAACC,IAAhB;AACD,OA3CH,EA8CGgB,KA9CH,CA8CSC,GAAG,IAAIN,OAAO,CAACC,GAAR,CAAYK,GAAZ,CA9ChB;AA+CD,KAlEkC;AAAA;;AAanCC,EAAAA,iBAAiB,GAAG;AAClB,SAAKvB,SAAL;AACD;;AAqDDwB,EAAAA,MAAM,GAAG;AACPR,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKxB,KAAL,CAAWM,MAAX,CAAkB0B,MAA9B;AACA,WACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKhC,KAAL,CAAWM,MAAX,CAAkB0B,MAAlB,GAA2B,CAA3B,IAAgC,KAAKhC,KAAL,CAAWM,MAAX,CAAkB2B,GAAlB,CAAsBC,KAAK,IAG1D,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAEA,KAAhB;AAAuB,MAAA,GAAG,EAAEA,KAAK,CAAC9B,QAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAH+B,CADnC,CADF;AAOD;;AA7EkC;;AAgFrC,eAAeL,YAAf","sourcesContent":["import React, { Component } from \"react\";\nimport API from \"../../utils/API\";\nimport ItemCard from \"../ItemCard\";\n\n\nclass ItemsDonated extends Component {\n\n  state = {\n    item: \"\",\n    quantity: \"\",\n    category: \"\",\n    stock_id: \"\",\n    img_url: \"\",\n    stocks: []\n    \n    \n  }\n  //load all stock\n  componentDidMount() {\n    this.loadStock();\n  }\n\n  loadStock = () => {\n    var arr=[];\n    API.getData()\n      .then(res => {\n        \n        //this.setState({ stocks: res.data })\n      \n        res.data.forEach(element => {\n            \n          if(element.claimed ==\"false\")\n          {\n            arr.push(element);\n\n\n          }\n        else if(element.claimed==\"true\")\n        {\n          //console.log(\"pickupppp\"+element.claimedDate);\n          //checking date claimed is less that current date (no pickup happened)\n          var dtcl=new Date(element.claimedDate);\n          dtcl.setDate(dtcl.getDate()+2);\n          var todays_date=new Date(); \n          if(dtcl<todays_date)\n          {\n            arr.push(element);\n            console.log(\"no pickup on date +2 so back to stock till 5days starting from posted date\");\n          }\n          else{\n           console.log(\"item pickup success or going to happen\");\n          }\n          \n        }\n        \n            //if claimed item not collected\n            var dt=new Date(element.date);\n            dt.setDate(dt.getDate()+1);\n           // console.log(dt);\n            //need to complete\n\n            \n          \n        });\n        this.setState({ stocks: arr})\n        // this.props.updatestock(this.state.stocks);\n        console.log(res.data);\n      }\n\n      )\n      .catch(err => console.log(err));\n  };\n\n  render() {\n    console.log(this.state.stocks.length);\n    return (\n      <div className=\"row\">\n        {this.state.stocks.length > 1 && this.state.stocks.map(stock =>\n        \n          \n          <ItemCard item={stock} key={stock.stock_id} />)}\n      </div>);\n  }\n\n}\nexport default ItemsDonated;"]},"metadata":{},"sourceType":"module"}